apiVersion: jaegertracing.io/v1
kind: Jaeger
metadata:
  name: jaeger-eck
  namespace: monitoring
spec:
  strategy: production   # separates collector, query, ingester
  collector:
    replicas: 2
    options:
      log-level: debug
    resources:
      requests:
        cpu: "500m"
        memory: "1Gi"
      limits:
        cpu: "1"
        memory: "2Gi"
    service:
      type: ClusterIP
  query:
    replicas: 2
    options:
      log-level: debug
    resources:
      requests:
        cpu: "500m"
        memory: "1Gi"
      limits:
        cpu: "1"
        memory: "2Gi"
    service:
      type: ClusterIP
  ingester:
    replicas: 1
    resources:
      requests:
        cpu: "500m"
        memory: "1Gi"
      limits:
        cpu: "1"
        memory: "2Gi"
    service:
      type: ClusterIP
  storage:
    type: elasticsearch
    options:
      es:
        server-urls: http://eck-elasticsearch-es-http.monitoring.svc.cluster.local:9200
    esIndexCleaner:
      enabled: true
      numberOfDays: 7   # keep 7 days of traces
      schedule: "55 23 * * *"
    esRollover:
      schedule: "0 0 * * *"
  ingress:
    enabled: false   # explicitly disable ingress
