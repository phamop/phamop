
kubectl patch deployment otel-collector -n <namespace> -p '{"metadata":{"finalizers":[]}}' --type=merge



kubectl get all -n monitoring -o json \
  | jq '.items[] | select(.metadata.finalizers != null) | {kind: .kind, name: .metadata.name, finalizers: .metadata.finalizers}'

kubectl get all -n monitoring -o yaml | grep -B5 "finalizers:"

# Delete all OpenTelemetry Collector instances in the namespace
kubectl delete opentelemetrycollectors --all -n <namespace>

# Delete the operator deployment (if installed in the namespace)
kubectl delete deployment opentelemetry-operator-controller-manager -n <namespace>

# Then delete the namespace
kubectl delete ns <namespace>





patches:
  - target:
      group: kustomize.config.k8s.io
      version: v1beta1
      kind: Kustomization
    patch: |
      - op: remove
        path: /helmCharts/0/valuesFile
      - op: add
        path: /helmCharts/0/valuesFiles
        value:
          - ../../base/grafana/helm-values.yaml       
          - grafana.values.patch.yaml
